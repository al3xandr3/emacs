#!/usr/bin/python

import os, sys

if len(sys.argv) != 3:
    print """
Usage:
  md5check filename.ext checksum
"""
    sys.exit(1)

filename = sys.argv[1]
checksum = sys.argv[2].lower().strip()

try:
    res = os.popen("md5 "+filename)
    
    result = res.read().split(" ")[-1].strip()
    
    if result == checksum:
        print "\nChecksum OK!\n"
    else:
        print "\nChecksum wrong!\n"
    
except:
    print "Could not do md5 check:", sys.exc_info()[0]
    sys.exit(1)
